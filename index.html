<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz INSS 2022 - Estudo Gamificado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            margin-bottom: 20px;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #667eea;
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 14px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-box.timer {
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
        }

        .stat-box.timer.warning {
            animation: timerPulse 1s infinite;
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }

        .timer-icon {
            font-size: 16px;
            margin-right: 5px;
        }

        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 10px;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-card {
            margin-bottom: 25px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .subject-tag {
            background: #f0f0f0;
            color: #666;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
        }

        .context-box {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            color: #444;
        }

        .question-text {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .answer-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .answer-btn {
            padding: 18px;
            border: 3px solid #e0e0e0;
            background: white;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .answer-btn.correct {
            background: #4ade80;
            border-color: #22c55e;
            color: white;
            animation: pulse 0.5s ease;
        }

        .answer-btn.wrong {
            background: #f87171;
            border-color: #ef4444;
            color: white;
            animation: shake 0.5s ease;
        }

        .answer-btn.disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        .feedback.correct {
            background: #dcfce7;
            color: #15803d;
        }

        .feedback.wrong {
            background: #fee2e2;
            color: #991b1b;
        }

        .next-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn.show {
            display: block;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .result-screen {
            text-align: center;
            display: none;
        }

        .result-screen.show {
            display: block;
        }

        .result-emoji {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 32px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .result-stats {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .result-stat {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .result-stat:last-child {
            border-bottom: none;
        }

        .restart-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .start-screen {
            text-align: center;
        }

        .start-screen.hide {
            display: none;
        }

        .start-emoji {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .start-title {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .start-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .start-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

            @media (max-width: 480px) {
            .card {
                padding: 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .question-text {
                font-size: 15px;
            }

            .answer-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <!-- Tela Inicial -->
            <div class="start-screen" id="startScreen">
                <div class="start-emoji">üéØ</div>
                <h1 class="start-title">Quiz INSS 2022</h1>
                <p class="start-description">
                    Teste seus conhecimentos com 70 quest√µes de Conhecimentos Espec√≠ficos do concurso INSS 2022 (CEBRASPE).
                    <br><br>
                    <strong>Formato:</strong> Certo ou Errado<br>
                    <strong>Pontua√ß√£o:</strong> +10 pontos por acerto
                </p>
                <button class="start-btn" onclick="startQuiz()">üöÄ Come√ßar Quiz</button>
            </div>

            <!-- Header do Quiz -->
            <div class="header" id="quizHeader" style="display: none;">
                <h1>üìö Quiz INSS 2022</h1>
                <p>Conhecimentos Espec√≠ficos - CEBRASPE</p>
            </div>

            <!-- Estat√≠sticas -->
            <div class="stats" id="stats" style="display: none;">
                <div class="stat-box">
                    <div class="stat-label">Quest√£o</div>
                    <div class="stat-value" id="currentQuestion">1</div>
                </div>
                <div class="stat-box timer" id="timerBox">
                    <div class="stat-label">Tempo</div>
                    <div class="stat-value">
                        <span class="timer-icon">‚è±Ô∏è</span>
                        <span id="timer">60</span>s
                    </div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Pontos</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Acertos</div>
                    <div class="stat-value" id="correct">0</div>
                </div>
            </div>

            <!-- Barra de Progresso -->
            <div class="progress-bar" id="progressBar" style="display: none;">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <!-- √Årea da Quest√£o -->
            <div id="questionArea" style="display: none;">
                <div class="question-card">
                    <div class="question-header">
                        <span class="question-number" id="questionNum">Quest√£o 51</span>
                        <span class="subject-tag" id="subject">Assunto</span>
                    </div>
                    
                    <div class="context-box" id="contextBox"></div>
                    
                    <div class="question-text" id="questionText"></div>
                    
                    <div class="answer-buttons">
                        <button class="answer-btn" onclick="checkAnswer('C')">
                            ‚úì CERTO
                        </button>
                        <button class="answer-btn" onclick="checkAnswer('E')">
                            ‚úó ERRADO
                        </button>
                    </div>
                </div>

                <div class="feedback" id="feedback"></div>
                
                <button class="next-btn" id="nextBtn" onclick="nextQuestion()">
                    Pr√≥xima Quest√£o ‚Üí
                </button>
            </div>

            <!-- Tela de Resultado -->
            <div class="result-screen" id="resultScreen">
                <div class="result-emoji" id="resultEmoji">üéâ</div>
                <h2 class="result-title">Quiz Finalizado!</h2>
                
                <div class="result-stats">
                    <div class="result-stat">
                        <span>Total de Quest√µes:</span>
                        <strong id="totalQuestions">70</strong>
                    </div>
                    <div class="result-stat">
                        <span>Acertos:</span>
                        <strong id="finalCorrect" style="color: #22c55e;">0</strong>
                    </div>
                    <div class="result-stat">
                        <span>Erros:</span>
                        <strong id="finalWrong" style="color: #ef4444;">0</strong>
                    </div>
                    <div class="result-stat">
                        <span>Aproveitamento:</span>
                        <strong id="percentage" style="color: #667eea;">0%</strong>
                    </div>
                    <div class="result-stat">
                        <span>Pontua√ß√£o Final:</span>
                        <strong id="finalScore" style="color: #667eea; font-size: 24px;">0</strong>
                    </div>
                </div>
                
                <button class="restart-btn" onclick="restartQuiz()">üîÑ Reiniciar Quiz</button>
            </div>
        </div>
    </div>

    <script>
        let currentIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let timeLeft = 60;
        let timerInterval = null;
        let totalTime = 0;
        let shuffledQuestions = [];
        let questoes = [];

        // Carregar quest√µes do arquivo JSON
        async function loadQuestionsFromFile() {
            try {
                const response = await fetch('questoes.json');
                if (!response.ok) {
                    throw new Error('Erro ao carregar quest√µes');
                }
                const data = await response.json();
                questoes = data.questoes;
                
                // Atualizar informa√ß√µes do concurso na tela inicial
                updateConcursoInfo(data.concurso);
                
                console.log(`‚úÖ ${questoes.length} quest√µes carregadas com sucesso!`);
            } catch (error) {
                console.error('‚ùå Erro ao carregar quest√µes:', error);
                alert('Erro ao carregar as quest√µes. Verifique se o arquivo questoes.json est√° na pasta correta.');
            }
        }

        function updateConcursoInfo(concurso) {
            const description = document.querySelector('.start-description');
            if (description && concurso) {
                description.innerHTML = `
                    Teste seus conhecimentos com ${questoes.length} quest√µes de Conhecimentos Espec√≠ficos do concurso ${concurso.instituicao} (${concurso.banca}).
                    <br><br>
                    <strong>Cargo:</strong> ${concurso.cargo}<br>
                    <strong>Formato:</strong> Certo ou Errado<br>
                    <strong>Pontua√ß√£o:</strong> +10 pontos por acerto (+ b√¥nus por velocidade)
                `;
            }
        }

        // Carregar quest√µes quando a p√°gina carregar
        window.addEventListener('DOMContentLoaded', loadQuestionsFromFile);

        // Fun√ß√£o para embaralhar array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startQuiz() {
            if (questoes.length === 0) {
                alert('Aguarde o carregamento das quest√µes...');
                return;
            }
            
            // Embaralhar quest√µes
            shuffledQuestions = shuffleArray(questoes);
            
            document.getElementById('startScreen').classList.add('hide');
            document.getElementById('quizHeader').style.display = 'block';
            document.getElementById('stats').style.display = 'grid';
            document.getElementById('progressBar').style.display = 'block';
            document.getElementById('questionArea').style.display = 'block';
            loadQuestion();
        }

        function startTimer() {
            timeLeft = 60;
            document.getElementById('timer').textContent = timeLeft;
            document.getElementById('timerBox').classList.remove('warning');
            
            clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                totalTime++;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 10) {
                    document.getElementById('timerBox').classList.add('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    autoSubmit();
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
        }

        function autoSubmit() {
            const q = shuffledQuestions[currentIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');
            
            buttons.forEach(btn => btn.classList.add('disabled'));
            buttons[q.gabarito === 'C' ? 0 : 1].classList.add('correct');
            
            feedback.textContent = '‚è∞ Tempo esgotado! A resposta correta era: ' + (q.gabarito === 'C' ? 'CERTO' : 'ERRADO');
            feedback.className = 'feedback wrong show';
            wrongAnswers++;
            
            document.getElementById('nextBtn').classList.add('show');
        }

        function loadQuestion() {
            const q = shuffledQuestions[currentIndex];
            
            document.getElementById('questionNum').textContent = `Quest√£o ${q.numero}`;
            document.getElementById('subject').textContent = q.assunto;
            document.getElementById('contextBox').textContent = q.enunciado_contexto;
            document.getElementById('questionText').textContent = q.enunciado;
            document.getElementById('currentQuestion').textContent = currentIndex + 1;
            
            // Resetar bot√µes
            const buttons = document.querySelectorAll('.answer-btn');
            buttons.forEach(btn => {
                btn.classList.remove('correct', 'wrong', 'disabled');
            });
            
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('nextBtn').classList.remove('show');
            
            // Atualizar progresso
            const progress = ((currentIndex + 1) / shuffledQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Iniciar timer
            startTimer();
        }

        function checkAnswer(answer) {
            stopTimer();
            
            const q = shuffledQuestions[currentIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');
            
            buttons.forEach(btn => btn.classList.add('disabled'));
            
            if (answer === q.gabarito) {
                buttons[answer === 'C' ? 0 : 1].classList.add('correct');
                
                // B√¥nus de tempo
                let bonus = 0;
                if (timeLeft > 45) bonus = 5;
                else if (timeLeft > 30) bonus = 3;
                else if (timeLeft > 15) bonus = 1;
                
                const pointsEarned = 10 + bonus;
                
                feedback.textContent = bonus > 0 ? 
                    `üéâ Parab√©ns! Resposta correta! (+${pointsEarned} pontos - B√¥nus de ${bonus} por velocidade!)` :
                    'üéâ Parab√©ns! Resposta correta! (+10 pontos)';
                feedback.className = 'feedback correct show';
                correctAnswers++;
                score += pointsEarned;
                document.getElementById('correct').textContent = correctAnswers;
                document.getElementById('score').textContent = score;
            } else {
                buttons[answer === 'C' ? 0 : 1].classList.add('wrong');
                buttons[answer === 'C' ? 1 : 0].classList.add('correct');
                feedback.textContent = `‚ùå Resposta incorreta! A resposta correta √©: ${q.gabarito === 'C' ? 'CERTO' : 'ERRADO'}`;
                feedback.className = 'feedback wrong show';
                wrongAnswers++;
            }
            
            document.getElementById('nextBtn').classList.add('show');
        }

        function nextQuestion() {
            currentIndex++;
            
            if (currentIndex < shuffledQuestions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            stopTimer();
            
            document.getElementById('quizHeader').style.display = 'none';
            document.getElementById('stats').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('questionArea').style.display = 'none';
            document.getElementById('resultScreen').classList.add('show');
            
            const percentage = ((correctAnswers / shuffledQuestions.length) * 100).toFixed(1);
            const avgTime = Math.floor(totalTime / shuffledQuestions.length);
            
            document.getElementById('totalQuestions').textContent = shuffledQuestions.length;
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('finalWrong').textContent = wrongAnswers;
            document.getElementById('percentage').textContent = percentage + '%';
            document.getElementById('finalScore').textContent = score + ' pontos';
            
            // Emoji baseado no desempenho
            let emoji = 'üéâ';
            if (percentage >= 90) emoji = 'üèÜ';
            else if (percentage >= 70) emoji = 'üéØ';
            else if (percentage >= 50) emoji = 'üëç';
            else emoji = 'üìö';
            
            document.getElementById('resultEmoji').textContent = emoji;
        }

        function restartQuiz() {
            stopTimer();
            currentIndex = 0;
            score = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            totalTime = 0;
            
            document.getElementById('resultScreen').classList.remove('show');
            document.getElementById('startScreen').classList.remove('hide');
            document.getElementById('score').textContent = '0';
            document.getElementById('correct').textContent = '0';
        }
    </script>
</body>
</html>